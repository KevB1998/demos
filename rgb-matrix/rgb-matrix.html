<html>
<head>
    <title>RGB Matrix Demo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/53235168ae.js" crossorigin="anonymous"></script>
</head>
<body>
    <script>
        global = {
            maxColors: 6
        };

        function submit() {
            numColors = $("#colorpicker-container").children().length;
            colors = []
            for (i=1; i<=numColors; i++) {
                colors.push($(`#color${i}`).val().toString().replace('#', '0x'));
            }
            colors = `{${colors.join(', ')}}`;
            console.log(colors);

            $("#displayDocument").attr("src", "display.ino");
        }

        function addColor() {
            numColors = $("#colorpicker-container").children().length;
            newColorPicker = `<input class="colorpicker" type="color" id="color${numColors+1}">`;
            $("#colorpicker-container").append(newColorPicker);
            if (numColors == 1) {
                $("#color-remove").show();
            } else if (numColors == 5) {
                $("#color-add").hide();
            }
        }

        function removeColor() {
            numColors = $("#colorpicker-container").children().length;
            $("#colorpicker-container").find(":last").remove();
            if (numColors == 2) {
                $("#color-remove").hide();
            } else if (numColors == 6) {
                $("#color-add").show();
            }
        }
        
        $(document).ready(function () {
            $("#color-remove").hide();
        });
    </script>
    <style>
        .colorpicker {
            display: block;
            margin: 20px;
        }

        #plus-minus-container {
            display: block;
        }

        .icon {
            margin: 20px;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
    <div class="row" style="height:100%; width:99%;">
        <div class="col-6">
            <iframe src="display.ino" width=100% height=100% id="displayDocument"></iframe>
        </div>
        <div class="col-6">
            <div id="colorpicker-container">
                <input class="colorpicker" type="color" id="color1">
            </div>
            <div id="plus-minus-container">
                <i class="icon fa-solid fa-plus" id="color-add" onclick="addColor();"></i>
                <i class="icon fa-solid fa-minus" id="color-remove" onclick="removeColor();"></i>
            </div>
            <button onclick="submit()">Submit</button>
        </div>
    </div>
</body>
</html>